jQuery(document).ready(function($){if($('h3:contains("Typography")').length>0&&$('#redux-opts-form-wrapper').length>0){$('.typography-table tbody tr:nth-child(7n+0) td').append('<span class="font-attrs-loading"></span>');$('.font-family select').chosen();$('.typography-table .font-family select').change(function(){updateFontAttrs($(this),'false');$(this).closest('tr').next('tr').next('tr').next('tr').find('select option').attr('selected','');$(this).closest('tr').next('tr').next('tr').next('tr').find('select option:visible:first').attr('selected','selected');$(this).closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('select option').attr('selected','');$(this).closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('select option:visible:first').attr('selected','selected');});$('.typography-table .font-family select').each(function(){updateFontAttrs($(this),'true');});$('.typography-table .font-option select[id*=_line_height]').each(function(){$(this).find('option[value="-"]').text('Line Height');});}
function updateFontAttrs(element,firstLoad){element.closest('tr').next('tr').next('tr').next('tr').find('select option').show();var $that=element;var $dataToPass={action:'nectar_check_font_attrs',font_family:element.val(),}
$that.closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('.font-attrs-loading').stop().animate({'opacity':'1'},350);$.post(fontData.ajaxurl,$dataToPass,function(data){$('.font-attrs-loading').stop().animate({'opacity':'0'},250);$json=$.parseJSON(data);$that.closest('tr').next('tr').next('tr').next('tr').find('select option:not(:first)').hide().attr("disabled","true");$that.closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('select option:not(:first)').hide().attr("disabled","true");if(firstLoad=='false'){$that.closest('tr').next('tr').next('tr').next('tr').find('select').val('-');$that.closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('select').val('subset');}
$.each($json,function(i,v){$.each(v.subsets,function(i,v){$that.closest('tr').next('tr').next('tr').next('tr').next('tr').next('tr').next('tr').find('td option[value='+v+']').show().removeAttr("disabled");});$.each(v.weights,function(i,v){$that.closest('tr').next('tr').next('tr').next('tr').find('td option[value='+v+']').show().removeAttr("disabled");});});});}})