jQuery(document).ready(function(){initUpload();function initUpload(){jQuery(".redux-opts-upload").on('click',function(event){var activeFileUploadContext=jQuery(this).parent();var relid=jQuery(this).attr('rel-id');event.preventDefault();custom_file_frame=null;custom_file_frame=wp.media.frames.customHeader=wp.media({title:jQuery(this).data("choose"),library:{type:'image'},button:{text:jQuery(this).data("update")}});custom_file_frame.on("select",function(){var attachment=custom_file_frame.state().get("selection").first();jQuery('.redux-opts-screenshot',activeFileUploadContext).attr('src',attachment.attributes.url);jQuery('#'+relid).val(attachment.attributes.url).trigger('change');jQuery('.redux-opts-upload',activeFileUploadContext).hide();jQuery('.redux-opts-screenshot',activeFileUploadContext).show();jQuery('.redux-opts-upload-remove',activeFileUploadContext).show();});custom_file_frame.open();});jQuery(".redux-opts-upload-remove").on('click',function(event){var activeFileUploadContext=jQuery(this).parent();var relid=jQuery(this).attr('rel-id');event.preventDefault();jQuery('#'+relid).val('');jQuery(this).prev().fadeIn('slow');jQuery('.redux-opts-screenshot',activeFileUploadContext).fadeOut('slow');jQuery(this).fadeOut('slow');});}});